// Generated by CoffeeScript 1.6.2
(function() {
  (function($, window, document) {
    var Plugin, cookie_name, pluginName, qr_el, qr_overlay;

    pluginName = "oxidQRcode";
    qr_overlay = $("#qrcode-overlay");
    qr_el = $("#qrcode");
    cookie_name = "qrcode_show";
    Plugin = (function() {
      function Plugin(element, options) {
        var _this = this;

        this.element = element;
        if (Modernizr.mq("only screen and (max-width: 767px)")) {
          return false;
        }
        new QRCode($(qr_el)[0], {
          text: options.url,
          width: 160,
          height: 160
        });
        if (($.cookie(cookie_name) == null) || $.cookie(cookie_name) === "true") {
          this.showQR();
        } else {
          this.hideQR();
        }
        qr_overlay.show();
        $(".qr-close").bind('click', function() {
          return _this.hideQR();
        });
        $(".qr-open").bind('click', function() {
          return _this.showQR();
        });
      }

      Plugin.prototype.showQR = function() {
        $(qr_el).show();
        $(".qr-open").hide();
        $(".qr-close").show();
        $.removeCookie(cookie_name);
        return $.cookie(cookie_name, true, {
          path: "/"
        });
      };

      Plugin.prototype.hideQR = function() {
        $(qr_el).hide();
        $(".qr-open").show();
        $(".qr-close").hide();
        $.removeCookie(cookie_name);
        return $.cookie(cookie_name, false, {
          path: "/"
        });
      };

      return Plugin;

    })();
    return $.fn[pluginName] = function(options) {
      return this.each(function() {
        if (!$.data(this, "plugin_" + pluginName)) {
          return $.data(this, "plugin_" + pluginName, new Plugin(this, options));
        }
      });
    };
  })(jQuery, window, document);

}).call(this);
